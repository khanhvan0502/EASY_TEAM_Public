{"ast":null,"code":"var _jsxFileName = \"D:\\\\xampp\\\\htdocs\\\\EASY_TEAM_4\\\\gradution\\\\FrontEnd\\\\src\\\\AdminPrivateRoute.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport MasterLayout from './layouts/admin/MasterLayout';\nimport { Redirect, Route, useHistory } from \"react-router\";\nimport axios from \"axios\";\nimport swal from \"sweetalert\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction AdminPrivateRoute(_ref) {\n  _s();\n\n  let { ...rest\n  } = _ref;\n  const history = useHistory();\n  const [Authenticated, setAuthenticated] = useState(false);\n  const [Loading, setLoading] = useState(true);\n  useEffect(() => {\n    axios.get(`api/checkingAuthenticated`).then(res => {\n      if (res.status === 200) {\n        setAuthenticated(true);\n      }\n\n      setLoading(false);\n    });\n    return () => {\n      setAuthenticated(false);\n    };\n  }, []); // axios.interceptors.response.use(undefined, function axiosRetryInterceptor(err) {\n  //     if (err.response.status === 401) {\n  //         swal(\"Unauthorized\", err.response.data.message, \"warning\");\n  //         history.push('/');\n  //     }\n  //     return Promise.reject(err);\n  // });\n\n  axios.interceptors.response.use(function (response) {\n    return response;\n  }, function (error) {\n    if (error.response.status === 403) {\n      swal(\"Forbidden\", error.response.data.message, \"warning\");\n      history.push('/Page403');\n    } else if (error.response.status === 404) {\n      swal(\"404 Error\", \"Page Not Found\", \"warning\");\n      history.push('/Page404');\n    }\n\n    return Promise.reject(error);\n  });\n\n  if (Loading) {\n    return /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Loading ...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 16\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(Route, { ...rest,\n    render: _ref2 => {\n      let {\n        props,\n        location\n      } = _ref2;\n      return Authenticated ? /*#__PURE__*/_jsxDEV(MasterLayout, { ...props\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 34\n      }, this) : /*#__PURE__*/_jsxDEV(Redirect, {\n        to: {\n          pathname: \"/login\",\n          state: {\n            from: location\n          }\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 66\n      }, this);\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 9\n  }, this);\n}\n\n_s(AdminPrivateRoute, \"nXGRAifY9ItJH8wYer6OMdN3Ju8=\", false, function () {\n  return [useHistory];\n});\n\n_c = AdminPrivateRoute;\nexport default AdminPrivateRoute;\n\nvar _c;\n\n$RefreshReg$(_c, \"AdminPrivateRoute\");","map":{"version":3,"sources":["D:/xampp/htdocs/EASY_TEAM_4/gradution/FrontEnd/src/AdminPrivateRoute.js"],"names":["React","useState","useEffect","MasterLayout","Redirect","Route","useHistory","axios","swal","AdminPrivateRoute","rest","history","Authenticated","setAuthenticated","Loading","setLoading","get","then","res","status","interceptors","response","use","error","data","message","push","Promise","reject","props","location","pathname","state","from"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,YAAP,MAAyB,8BAAzB;AACA,SAASC,QAAT,EAAmBC,KAAnB,EAA0BC,UAA1B,QAA4C,cAA5C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,IAAP,MAAiB,YAAjB;;;AAEA,SAASC,iBAAT,OAAwC;AAAA;;AAAA,MAAb,EAAE,GAAGC;AAAL,GAAa;AAEpC,QAAMC,OAAO,GAAGL,UAAU,EAA1B;AACA,QAAM,CAACM,aAAD,EAAgBC,gBAAhB,IAAoCZ,QAAQ,CAAC,KAAD,CAAlD;AACA,QAAM,CAACa,OAAD,EAAUC,UAAV,IAAwBd,QAAQ,CAAC,IAAD,CAAtC;AAGAC,EAAAA,SAAS,CAAC,MAAM;AACZK,IAAAA,KAAK,CAACS,GAAN,CAAW,2BAAX,EAAuCC,IAAvC,CAA4CC,GAAG,IAAI;AAC/C,UAAIA,GAAG,CAACC,MAAJ,KAAe,GAAnB,EAAwB;AACpBN,QAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACH;;AACDE,MAAAA,UAAU,CAAC,KAAD,CAAV;AACH,KALD;AAMA,WAAO,MAAM;AACTF,MAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACH,KAFD;AAGH,GAVQ,EAUN,EAVM,CAAT,CAPoC,CAmBpC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAN,EAAAA,KAAK,CAACa,YAAN,CAAmBC,QAAnB,CAA4BC,GAA5B,CAAgC,UAAUD,QAAV,EAAoB;AAChD,WAAOA,QAAP;AACH,GAFD,EAEG,UAAUE,KAAV,EAAiB;AAChB,QAAIA,KAAK,CAACF,QAAN,CAAeF,MAAf,KAA0B,GAA9B,EAAmC;AAC/BX,MAAAA,IAAI,CAAC,WAAD,EAAce,KAAK,CAACF,QAAN,CAAeG,IAAf,CAAoBC,OAAlC,EAA2C,SAA3C,CAAJ;AACAd,MAAAA,OAAO,CAACe,IAAR,CAAa,UAAb;AACH,KAHD,MAIK,IAAIH,KAAK,CAACF,QAAN,CAAeF,MAAf,KAA0B,GAA9B,EAAmC;AACpCX,MAAAA,IAAI,CAAC,WAAD,EAAc,gBAAd,EAAgC,SAAhC,CAAJ;AACAG,MAAAA,OAAO,CAACe,IAAR,CAAa,UAAb;AACH;;AACD,WAAOC,OAAO,CAACC,MAAR,CAAeL,KAAf,CAAP;AACH,GAZD;;AAcA,MAAIT,OAAJ,EAAa;AACT,wBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAP;AACH;;AAED,sBACI,QAAC,KAAD,OAAWJ,IAAX;AACI,IAAA,MAAM,EAAE;AAAA,UAAC;AAAEmB,QAAAA,KAAF;AAASC,QAAAA;AAAT,OAAD;AAAA,aACJlB,aAAa,gBAAI,QAAC,YAAD,OAAkBiB;AAAlB;AAAA;AAAA;AAAA;AAAA,cAAJ,gBAAoC,QAAC,QAAD;AAAU,QAAA,EAAE,EAAE;AAAEE,UAAAA,QAAQ,EAAE,QAAZ;AAAsBC,UAAAA,KAAK,EAAE;AAAEC,YAAAA,IAAI,EAAEH;AAAR;AAA7B;AAAd;AAAA;AAAA;AAAA;AAAA,cAD7C;AAAA;AADZ;AAAA;AAAA;AAAA;AAAA,UADJ;AAOH;;GApDQrB,iB;UAEWH,U;;;KAFXG,iB;AAsDT,eAAeA,iBAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport MasterLayout from './layouts/admin/MasterLayout';\r\nimport { Redirect, Route, useHistory } from \"react-router\";\r\nimport axios from \"axios\";\r\nimport swal from \"sweetalert\";\r\n\r\nfunction AdminPrivateRoute({ ...rest }) {\r\n    \r\n    const history = useHistory();\r\n    const [Authenticated, setAuthenticated] = useState(false);\r\n    const [Loading, setLoading] = useState(true);\r\n\r\n\r\n    useEffect(() => {\r\n        axios.get(`api/checkingAuthenticated`).then(res => {\r\n            if (res.status === 200) {\r\n                setAuthenticated(true);\r\n            }\r\n            setLoading(false);\r\n        });\r\n        return () => {\r\n            setAuthenticated(false);\r\n        }\r\n    }, []);\r\n\r\n    // axios.interceptors.response.use(undefined, function axiosRetryInterceptor(err) {\r\n    //     if (err.response.status === 401) {\r\n    //         swal(\"Unauthorized\", err.response.data.message, \"warning\");\r\n    //         history.push('/');\r\n    //     }\r\n    //     return Promise.reject(err);\r\n    // });\r\n\r\n    axios.interceptors.response.use(function (response) {\r\n        return response;\r\n    }, function (error) {\r\n        if (error.response.status === 403) {\r\n            swal(\"Forbidden\", error.response.data.message, \"warning\");\r\n            history.push('/Page403');\r\n        }\r\n        else if (error.response.status === 404) {\r\n            swal(\"404 Error\", \"Page Not Found\", \"warning\");\r\n            history.push('/Page404');\r\n        }\r\n        return Promise.reject(error);\r\n    });\r\n\r\n    if (Loading) {\r\n        return <h1>Loading ...</h1>\r\n    }\r\n\r\n    return (\r\n        <Route {...rest}\r\n            render={({ props, location }) =>\r\n                Authenticated ? (<MasterLayout {...props} />) : (<Redirect to={{ pathname: \"/login\", state: { from: location } }} />)\r\n            }\r\n        />\r\n    );\r\n}\r\n\r\nexport default AdminPrivateRoute;"]},"metadata":{},"sourceType":"module"}